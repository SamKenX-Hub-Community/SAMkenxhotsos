target-name: ceph-osd/bugs.yaml
data-root:
  files:
    etc/ceph/ceph.conf: |
      [osd]
      bluefs_buffered_io = true
    sos_commands/dpkg/dpkg_-l: |
      ii  ceph-osd 15.2.7-0ubuntu0.20.04.2 amd64
    sys/fs/bcache/d7696818-1be9-4dea-9991-de95e24d7256/cache_available_percent: '69'
  copy-from-original:
    - sos_commands/systemd/systemctl_list-units
    - sos_commands/systemd/systemctl_list-unit-files
mock:
  patch:
    hotsos.core.plugins.storage.ceph.CephDaemonConfigShowAllOSDs.bluestore_volume_selection_policy:
      kwargs:
        new: [rocksdb_original]
        create: true
raised-bugs:
  https://bugs.launchpad.net/bugs/1959649: >-
    This host is vulnerable to known bug https://tracker.ceph.com/issues/38745. RocksDB
    needs more space than the leveled space available so it is using storage
    from the data disk. Please set bluestore_volume_selection_policy of all OSDs to
    use_some_extra
